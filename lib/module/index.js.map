{"version":3,"sources":["index.js"],"names":["React","Component","View","StyleSheet","Dimensions","TouchableWithoutFeedback","Keyboard","Animated","Interactable","Screen","width","get","height","getSnapPoints","snapPoints","map","snapItem","parentValue","split","snapObject","y","getInitialPosition","snapPoint","BottomPanel","constructor","props","snap","onReachEnd","onReachTop","nativeEvent","index","setState","isBottomSheetDismissed","length","findIndex","x","sheetRef","snapTo","dismiss","_deltaY","Value","state","snapToIndex","points","scrollValueY","isDismissWithPress","isBackDropDismissByPress","initialPosition","createRef","render","bottomSheerColor","backDropColor","isRoundBorderWithTipHeader","header","body","isBackDrop","isModal","isAnimatedYFromParent","animatedValueY","containerStyle","tipStyle","headerStyle","bodyStyle","renderTip","onBackDropPress","backDropTransparent","disableTopDrag","boundariesTopValue","styles","panelContainer","backgroundColor","opacity","interpolate","inputRange","outputRange","extrapolateRight","ref","top","bounce","onDrawerSnap","dismissBottomSheet","marginTop","modal","panel","borderTopLeftRadius","borderTopRightRadius","shadowColor","shadowOffset","shadowRadius","shadowOpacity","panelHandle","panelHeader","create","container","flex","position","alignSelf","borderRadius","marginVertical","padding","bottom","left","right"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  View,\n  StyleSheet,\n  Dimensions,\n  TouchableWithoutFeedback,\n  Keyboard,\n} from 'react-native';\nimport Animated from 'react-native-reanimated';\nimport Interactable from 'react-native-interactable-reanimated';\n\nconst Screen = {\n  width: Dimensions.get('window').width,\n  height: Dimensions.get('window').height,\n};\n\nconst getSnapPoints = (snapPoints) => {\n  return snapPoints.map((snapItem) => {\n    if (typeof snapItem === 'string') {\n      const parentValue = snapItem.split('%')[0];\n      snapItem = (Screen.height / 100) * parentValue;\n    }\n    const snapObject = { y: Screen.height - snapItem };\n    return snapObject;\n  });\n};\n\nconst getInitialPosition = (snapPoint) => {\n  if (typeof snapPoint === 'string') {\n    const parentValue = snapPoint.split('%')[0];\n    snapPoint = (Screen.height / 100) * parentValue;\n  }\n  const snapObject = { y: Screen.height - snapPoint };\n  return snapObject;\n};\n\nclass BottomPanel extends Component {\n  constructor(props) {\n    super(props);\n    this._deltaY = new Animated.Value(500);\n    this.state = {\n      snapToIndex: 0,\n      points: 100,\n      scrollValueY: new Animated.Value(0),\n      isDismissWithPress: props.isBackDropDismissByPress\n        ? props.isBackDropDismissByPress\n        : false,\n      isBottomSheetDismissed:\n        props.initialPosition === 0 || props.initialPosition === '0%',\n    };\n\n    this.sheetRef = React.createRef();\n  }\n\n  onDrawerSnap = (snap) => {\n    const { snapPoints, onReachEnd, onReachTop } = this.props;\n\n    if (\n      snapPoints[snap.nativeEvent.index] === 0 ||\n      snapPoints[snap.nativeEvent.index] === '0%'\n    ) {\n      this.setState({ isBottomSheetDismissed: true });\n      onReachEnd && onReachEnd();\n    } else if (\n      snapPoints[snap.nativeEvent.index] === snapPoints[snapPoints.length - 1]\n    ) {\n      onReachTop && onReachTop();\n    } else {\n      this.setState({ isBottomSheetDismissed: false });\n    }\n  };\n\n  dismissBottomSheet = () => {\n    const { snapPoints } = this.props;\n    let index = snapPoints.findIndex((x) => x === 0 || x === '0%');\n    if (index !== -1) {\n      this.sheetRef.snapTo({ index });\n    }\n  };\n\n  snapTo = (index) => {\n    const { snapPoints } = this.props;\n    if (snapPoints.findIndex((x) => x === 0 || x === '0%') !== -1) {\n      Keyboard.dismiss();\n    }\n    this.sheetRef.snapTo({ index });\n  };\n\n  render() {\n    const {\n      bottomSheerColor = '#FFFFFF',\n      backDropColor = '#000000',\n      isRoundBorderWithTipHeader = false,\n      header,\n      body,\n      isBackDrop = false,\n      isModal,\n      isAnimatedYFromParent,\n      animatedValueY,\n      containerStyle,\n      tipStyle,\n      headerStyle,\n      bodyStyle,\n      renderTip = true,\n      onBackDropPress,\n      backDropTransparent = false,\n      disableTopDrag = false,\n    } = this.props;\n    let { snapPoints, initialPosition = { y: 0 } } = this.props;\n    snapPoints = getSnapPoints(snapPoints);\n    initialPosition = getInitialPosition(initialPosition);\n    const { isDismissWithPress, isBottomSheetDismissed } = this.state;\n    const boundariesTopValue = disableTopDrag ? 300 : -300;\n    return (\n      <View style={styles.panelContainer} pointerEvents={'box-none'}>\n        {/* Backdrop */}\n        {isBackDrop && (\n          <Animated.View\n            pointerEvents={!isBottomSheetDismissed ? 'auto' : 'box-none'}\n            style={[\n              styles.panelContainer,\n              !backDropTransparent && {\n                backgroundColor: backDropColor,\n                opacity: isAnimatedYFromParent\n                  ? animatedValueY.interpolate({\n                      inputRange: [0, Screen.height - 100],\n                      outputRange: [1, 0],\n                      extrapolateRight: 'clamp',\n                    })\n                  : this._deltaY.interpolate({\n                      inputRange: [0, Screen.height - 100],\n                      outputRange: [1, 0],\n                      extrapolateRight: 'clamp',\n                    }),\n              },\n            ]}\n          />\n        )}\n\n        <Interactable.View\n          dragEnabled={isModal ? false : true}\n          verticalOnly={true}\n          ref={(ref) => (this.sheetRef = ref)}\n          snapPoints={snapPoints}\n          initialPosition={initialPosition}\n          boundaries={{\n            top: isModal ? 0 : boundariesTopValue,\n            bounce: isModal ? 0 : 0.5,\n          }}\n          animatedValueY={isAnimatedYFromParent ? animatedValueY : this._deltaY}\n          onSnap={this.onDrawerSnap}\n        >\n          {!isModal && isDismissWithPress && !isBottomSheetDismissed && (\n            <TouchableWithoutFeedback\n              disabled={isBackDrop ? false : true}\n              onPress={() => {\n                this.dismissBottomSheet();\n                onBackDropPress && onBackDropPress();\n              }}\n            >\n              <View\n                style={{\n                  height: Screen.height,\n                  marginTop: -Screen.height,\n                }}\n              />\n            </TouchableWithoutFeedback>\n          )}\n\n          <View\n            style={\n              renderTip && [\n                isModal ? styles.modal : styles.panel,\n                { backgroundColor: bottomSheerColor },\n                isRoundBorderWithTipHeader\n                  ? {\n                      backgroundColor: bottomSheerColor,\n                      borderTopLeftRadius: 12,\n                      borderTopRightRadius: 12,\n                      shadowColor: '#000000',\n                      shadowOffset: { width: 0, height: 0 },\n                      shadowRadius: 5,\n                      shadowOpacity: 0.4,\n                    }\n                  : {},\n                containerStyle,\n              ]\n            }\n          >\n            {!isModal && isRoundBorderWithTipHeader && renderTip && (\n              <View style={[styles.panelHandle, tipStyle]} />\n            )}\n            {!isModal && (\n              <View style={[styles.panelHeader, headerStyle]}>{header}</View>\n            )}\n            <View style={bodyStyle}>{body}</View>\n          </View>\n        </Interactable.View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  panelHandle: {\n    position: 'absolute',\n    alignSelf: 'center',\n    width: 40,\n    height: 6,\n    borderRadius: 4,\n    backgroundColor: '#00000040',\n    marginVertical: 8,\n  },\n  panel: {\n    height: Screen.height + 300,\n  },\n  modal: {\n    height: Screen.height + 300,\n  },\n  panelHeader: {\n    padding: 16,\n  },\n  panelContainer: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n});\n\nexport default BottomPanel;\n"]}